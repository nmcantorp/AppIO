<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title></title>
  <link rel="stylesheet" href="">
</head>
<body>
  <script src="js/jquery.min.js"></script>  
<script>
    /**
     * Funcion que captura las variables pasados por GET
     * http://www.lawebdelprogramador.com/pagina.html?id=10&pos=3
     * Devuelve un array de clave=>valor
     */
    function getGET()
    {
        // capturamos la url
        var loc = document.location.href;
        // si existe el interrogante
        if(loc.indexOf('?')>0)
        {
            // cogemos la parte de la url que hay despues del interrogante
            var getString = loc.split('?')[1];
            // obtenemos un array con cada clave=valor
            var GET = getString.split('&');
            var get = {};
 
            // recorremos todo el array de valores
            for(var i = 0, l = GET.length; i < l; i++){
                var tmp = GET[i].split('=');
                get[tmp[0]] = unescape(decodeURI(tmp[1]));
            }
            return get;
        }
    }
 
    window.onload = function()
    {
        // Cogemos los valores pasados por get
        var valores=getGET();
        var actividades = JSON.parse(localStorage["actividad"]);
        var tiempo = JSON.parse(localStorage["tiempo"]);
        var valida = JSON.parse(localStorage["validacion"]);
        console.log(actividades);
        console.log(tiempo);
        console.log(valida);
        if(valores)
        {
            // hacemos un bucle para pasar por cada indice del array de valores
            for(var index in valores)
            {
                document.write("<br>clave: "+index+" - valor: "+valores[index]);
            }
        }else{
            // no se ha recibido ningun parametro por GET
            document.write("<br>No se ha recibido ningún parámetro");
        }
    }
    </script>
 
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
    google.load("visualization", "1.1", {packages:["gantt"]});
    google.setOnLoadCallback(drawChart);

    function daysToMilliseconds(days) {
      return days * 24 * 60 * 60 * 1000;
    }

    function drawChart() {
    	var f = new Date();
    	var dia = 0;
    	var mes = 0;
    	var anio = 0;
    	dia = parseInt(f.getDate());
    	mes = parseInt(f.getMonth());
    	anio = parseInt(f.getFullYear());
      var data = new google.visualization.DataTable();
      data.addColumn('string', 'Task ID');
      data.addColumn('string', 'Task Name');
      data.addColumn('date', null);
      data.addColumn('date', null);
      data.addColumn('number', 'Duration');
      data.addColumn('number', null);
      data.addColumn('string', 'Dependencies');

      data.addRows([
        ['1', 'Actividad 1',
         null, null, daysToMilliseconds(12),  100,  null],
        ['2', 'Actividad 2',
         null, null, daysToMilliseconds(8), 100, '1'],
        ['3', 'Actividad 3',
         null, null, daysToMilliseconds(6), 100, '1'],
        ['4', 'Actividad 4',
         null, null, daysToMilliseconds(6), 100, '1'],
        ['5', 'Actividad 5',
         null, null, daysToMilliseconds(8), 100, '2'],
     	['6', 'Actividad 6',
     	null, null, daysToMilliseconds(12), 100, '3'],
     	['7', 'Actividad 7',
     	null, null, daysToMilliseconds(4), 100, '3'],
     	['8', 'Actividad 8',
     	null, null, daysToMilliseconds(2), 100, '6,7'],
     	['9', 'Actividad 9',
     	null, null, daysToMilliseconds(2), 100, '4,6'],

        ['10', 'Actividad 10',
         null, null, daysToMilliseconds(4), 100, '8,9']
      ]);

      var options = {
        height: 300,
        //width: 400,
        is3D: true,
        gantt:{shadowEnabled:true,
	        	barHeight:10,
	        	barCornerRadius:15,
	        	percentEnabled:false,
	        	criticalPathEnabled: true,
	            criticalPathStyle: {
              	stroke: '#e64a19',
              	strokeWidth: 4,
              	defaultStartDate:new Date ( 2015 , mes , dia),
              	labelMaxWidth:100
            },
        	arrow:{angle: 100,
              width: 2,
              color: 'green',
              radius: 0},
          	innerGridTrack: {fill: '#CEFF45'},
  			innerGridDarkTrack: {fill: '#E4FF70'}  
        }              
      };

      var chart = new google.visualization.GanttChart(document.getElementById('chart_div'));

      chart.draw(data, options);
      var selection = chart.getSelection();

    }
  </script>
  <div id="chart_div"></div>
  </body>
</html>